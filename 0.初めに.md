# ガスポータルBackEnd (レイヤードアーキテクチャ)

## 勉強会の背景
- NestJs & レイヤードアーキテクチャの実際2ヶ月くらい実装して感じたこと
- 現時点ではこのトピックについては共有する人が自分しかない
- ガスポータルBackEnd実装について共有

## レイヤードアーキテクチャ実装について

> メリット
- typescriptの恩恵
  - コードの整合性を守れる (コードレベルのバグを予防できる)
  - 変数の型が明確
  - 関数の引数と戻り値が明確
- DTOの恩恵
  - requestとresponseをobjectで管理できる
  - validation処理が書きやすくなる
- レイヤーごとの責務分担
  - 責務が分かりやすい
  - コードが複雑にならない
  - データの流れが追いやすい

> デメリット
- 求められる知識が多い
  - typescript、NestJs、openApi、swagger、prisma
  - 各責務の理解
- コード量が多い
  - 定義が多い type、interface、class、yaml
  - レイヤーごとデータのマッピングが必要
- 修正に時間がかかる (戻りが大変)
  - ファイルごと依存関係が多い

## 実装で困ったところ
> どこから実装すべきか
- 様々なフォルダの中、どのファイルから作ればいい?
> UseCaseのカテゴライズ (module分離)
- どの観点からmoduleを分ければいいのか
- あのmoduleまだないのに
> Bigint
- typescriptのnumberタイプはBigintに対応しない
- DBのBigintはstringで扱う
> 命名に悩む
- action + taget + role + ts?
- 複数? 単数?
> DB設計に注意
- FK制約問題
- prisma仕様との競合

## cursorは使えるか
- 使えなかったら実装工数2倍
- 参考できるファイルやパスがあれば任せる
- swagger作業任せる